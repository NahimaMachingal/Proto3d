{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/sayfi/Desktop/proto-3d-model/frontend/components/ModelViewer.js"],"sourcesContent":["// components/ModelViewer.js\r\nimport React, { useEffect, useRef } from 'react';\r\nimport * as THREE from 'three';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ModelViewer = ({ modelPath, texturePath }) => {\r\n  const mountRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // Constants\r\n    const BACKGROUND_COLOR = 0xf0f0f0;\r\n    const CAMERA_POSITION_Z = 5;\r\n    const LIGHT_INTENSITY = {\r\n      ambient: 0.5,\r\n      directional: 0.8\r\n    };\r\n\r\n    // Scene setup\r\n    const scene = new THREE.Scene();\r\n    scene.background = new THREE.Color(BACKGROUND_COLOR);\r\n\r\n    // Helpers\r\n    const helpers = {\r\n      axes: new THREE.AxesHelper(5),\r\n      grid: new THREE.GridHelper(10, 10)\r\n    };\r\n    scene.add(helpers.axes);\r\n    scene.add(helpers.grid);\r\n\r\n    // Camera\r\n    const camera = new THREE.PerspectiveCamera(\r\n      75,\r\n      window.innerWidth / window.innerHeight,\r\n      0.1,\r\n      1000\r\n    );\r\n    camera.position.z = CAMERA_POSITION_Z;\r\n\r\n    // Renderer\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true });\r\n    renderer.setSize(\r\n      mountRef.current.clientWidth,\r\n      mountRef.current.clientHeight\r\n    );\r\n    mountRef.current.appendChild(renderer.domElement);\r\n\r\n    // Lights\r\n    const lights = {\r\n      ambient: new THREE.AmbientLight(0xffffff, LIGHT_INTENSITY.ambient),\r\n      directional: new THREE.DirectionalLight(0xffffff, LIGHT_INTENSITY.directional)\r\n    };\r\n    lights.directional.position.set(1, 1, 1);\r\n    scene.add(lights.ambient);\r\n    scene.add(lights.directional);\r\n\r\n    // Controls\r\n    const controls = new OrbitControls(camera, renderer.domElement);\r\n    controls.enableDamping = true;\r\n    controls.dampingFactor = 0.25;\r\n    controls.enableZoom = true;\r\n\r\n    // Model loading\r\n    const loadModel = () => {\r\n      const objLoader = new OBJLoader();\r\n      const textureLoader = new THREE.TextureLoader();\r\n\r\n      objLoader.load(\r\n        modelPath,\r\n        (obj) => {\r\n          textureLoader.load(\r\n            texturePath,\r\n            (texture) => {\r\n              applyMaterialToModel(obj, texture);\r\n              centerAndScaleModel(obj);\r\n              scene.add(obj);\r\n              adjustCameraToModel(obj, camera, controls);\r\n            },\r\n            undefined,\r\n            (error) => console.error('Texture loading error:', error)\r\n          );\r\n        },\r\n        (xhr) => console.log(`Model loading: ${(xhr.loaded / xhr.total) * 100}%`),\r\n        (error) => console.error('Model loading error:', error)\r\n      );\r\n    };\r\n\r\n    const applyMaterialToModel = (obj, texture) => {\r\n      obj.traverse((child) => {\r\n        if (child instanceof THREE.Mesh) {\r\n          child.material = new THREE.MeshStandardMaterial({\r\n            map: texture,\r\n            roughness: 0.7,\r\n            metalness: 0.0,\r\n          });\r\n        }\r\n      });\r\n    };\r\n\r\n    const centerAndScaleModel = (obj) => {\r\n      const box = new THREE.Box3().setFromObject(obj);\r\n      const center = box.getCenter(new THREE.Vector3());\r\n      obj.position.sub(center);\r\n    };\r\n\r\n    const adjustCameraToModel = (obj, camera, controls) => {\r\n      const box = new THREE.Box3().setFromObject(obj);\r\n      const size = box.getSize(new THREE.Vector3());\r\n      const maxDim = Math.max(size.x, size.y, size.z);\r\n      camera.position.z = maxDim * 2;\r\n      controls.update();\r\n    };\r\n\r\n    // Animation\r\n    const animate = () => {\r\n      requestAnimationFrame(animate);\r\n      controls.update();\r\n      renderer.render(scene, camera);\r\n    };\r\n\r\n    // Event handlers\r\n    const handleResize = () => {\r\n      camera.aspect = mountRef.current.clientWidth / mountRef.current.clientHeight;\r\n      camera.updateProjectionMatrix();\r\n      renderer.setSize(\r\n        mountRef.current.clientWidth,\r\n        mountRef.current.clientHeight\r\n      );\r\n    };\r\n\r\n    // Initial setup\r\n    loadModel();\r\n    animate();\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    // Cleanup\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      mountRef.current?.removeChild(renderer.domElement);\r\n    };\r\n  }, [modelPath, texturePath]);\r\n\r\n  return <div ref={mountRef} style={{ width: '100%', height: '100%' }} />;\r\n};\r\n\r\nModelViewer.propTypes = {\r\n  modelPath: PropTypes.string.isRequired,\r\n  texturePath: PropTypes.string.isRequired\r\n};\r\n\r\nexport default ModelViewer;"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAC5B;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAEA,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,WAAW,EAAE;IAC7C,MAAM,WAAW,CAAA,GAAA,mGAAA,CAAA,SAAM,AAAD,EAAE;IAExB,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,YAAY;QACZ,MAAM,mBAAmB;QACzB,MAAM,oBAAoB;QAC1B,MAAM,kBAAkB;YACtB,SAAS;YACT,aAAa;QACf;QAEA,cAAc;QACd,MAAM,QAAQ,IAAI,0GAAA,CAAA,QAAW;QAC7B,MAAM,UAAU,GAAG,IAAI,0GAAA,CAAA,QAAW,CAAC;QAEnC,UAAU;QACV,MAAM,UAAU;YACd,MAAM,IAAI,0GAAA,CAAA,aAAgB,CAAC;YAC3B,MAAM,IAAI,0GAAA,CAAA,aAAgB,CAAC,IAAI;QACjC;QACA,MAAM,GAAG,CAAC,QAAQ,IAAI;QACtB,MAAM,GAAG,CAAC,QAAQ,IAAI;QAEtB,SAAS;QACT,MAAM,SAAS,IAAI,0GAAA,CAAA,oBAAuB,CACxC,IACA,OAAO,UAAU,GAAG,OAAO,WAAW,EACtC,KACA;QAEF,OAAO,QAAQ,CAAC,CAAC,GAAG;QAEpB,WAAW;QACX,MAAM,WAAW,IAAI,0GAAA,CAAA,gBAAmB,CAAC;YAAE,WAAW;QAAK;QAC3D,SAAS,OAAO,CACd,SAAS,OAAO,CAAC,WAAW,EAC5B,SAAS,OAAO,CAAC,YAAY;QAE/B,SAAS,OAAO,CAAC,WAAW,CAAC,SAAS,UAAU;QAEhD,SAAS;QACT,MAAM,SAAS;YACb,SAAS,IAAI,0GAAA,CAAA,eAAkB,CAAC,UAAU,gBAAgB,OAAO;YACjE,aAAa,IAAI,0GAAA,CAAA,mBAAsB,CAAC,UAAU,gBAAgB,WAAW;QAC/E;QACA,OAAO,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG;QACtC,MAAM,GAAG,CAAC,OAAO,OAAO;QACxB,MAAM,GAAG,CAAC,OAAO,WAAW;QAE5B,WAAW;QACX,MAAM,WAAW,IAAI,sNAAA,CAAA,gBAAa,CAAC,QAAQ,SAAS,UAAU;QAC9D,SAAS,aAAa,GAAG;QACzB,SAAS,aAAa,GAAG;QACzB,SAAS,UAAU,GAAG;QAEtB,gBAAgB;QAChB,MAAM,YAAY;YAChB,MAAM,YAAY,IAAI,4MAAA,CAAA,YAAS;YAC/B,MAAM,gBAAgB,IAAI,0GAAA,CAAA,gBAAmB;YAE7C,UAAU,IAAI,CACZ,WACA,CAAC;gBACC,cAAc,IAAI,CAChB,aACA,CAAC;oBACC,qBAAqB,KAAK;oBAC1B,oBAAoB;oBACpB,MAAM,GAAG,CAAC;oBACV,oBAAoB,KAAK,QAAQ;gBACnC,GACA,WACA,CAAC,QAAU,QAAQ,KAAK,CAAC,0BAA0B;YAEvD,GACA,CAAC,MAAQ,QAAQ,GAAG,CAAC,CAAC,eAAe,EAAE,AAAC,IAAI,MAAM,GAAG,IAAI,KAAK,GAAI,IAAI,CAAC,CAAC,GACxE,CAAC,QAAU,QAAQ,KAAK,CAAC,wBAAwB;QAErD;QAEA,MAAM,uBAAuB,CAAC,KAAK;YACjC,IAAI,QAAQ,CAAC,CAAC;gBACZ,IAAI,iBAAiB,0GAAA,CAAA,OAAU,EAAE;oBAC/B,MAAM,QAAQ,GAAG,IAAI,0GAAA,CAAA,uBAA0B,CAAC;wBAC9C,KAAK;wBACL,WAAW;wBACX,WAAW;oBACb;gBACF;YACF;QACF;QAEA,MAAM,sBAAsB,CAAC;YAC3B,MAAM,MAAM,IAAI,0GAAA,CAAA,OAAU,GAAG,aAAa,CAAC;YAC3C,MAAM,SAAS,IAAI,SAAS,CAAC,IAAI,0GAAA,CAAA,UAAa;YAC9C,IAAI,QAAQ,CAAC,GAAG,CAAC;QACnB;QAEA,MAAM,sBAAsB,CAAC,KAAK,QAAQ;YACxC,MAAM,MAAM,IAAI,0GAAA,CAAA,OAAU,GAAG,aAAa,CAAC;YAC3C,MAAM,OAAO,IAAI,OAAO,CAAC,IAAI,0GAAA,CAAA,UAAa;YAC1C,MAAM,SAAS,KAAK,GAAG,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC;YAC9C,OAAO,QAAQ,CAAC,CAAC,GAAG,SAAS;YAC7B,SAAS,MAAM;QACjB;QAEA,YAAY;QACZ,MAAM,UAAU;YACd,sBAAsB;YACtB,SAAS,MAAM;YACf,SAAS,MAAM,CAAC,OAAO;QACzB;QAEA,iBAAiB;QACjB,MAAM,eAAe;YACnB,OAAO,MAAM,GAAG,SAAS,OAAO,CAAC,WAAW,GAAG,SAAS,OAAO,CAAC,YAAY;YAC5E,OAAO,sBAAsB;YAC7B,SAAS,OAAO,CACd,SAAS,OAAO,CAAC,WAAW,EAC5B,SAAS,OAAO,CAAC,YAAY;QAEjC;QAEA,gBAAgB;QAChB;QACA;QACA,OAAO,gBAAgB,CAAC,UAAU;QAElC,UAAU;QACV,OAAO;YACL,OAAO,mBAAmB,CAAC,UAAU;YACrC,SAAS,OAAO,EAAE,YAAY,SAAS,UAAU;QACnD;IACF,GAAG;QAAC;QAAW;KAAY;IAE3B,qBAAO,qKAAC;QAAI,KAAK;QAAU,OAAO;YAAE,OAAO;YAAQ,QAAQ;QAAO;;;;;;AACpE;AAEA,YAAY,SAAS,GAAG;IACtB,WAAW,mHAAA,CAAA,UAAS,CAAC,MAAM,CAAC,UAAU;IACtC,aAAa,mHAAA,CAAA,UAAS,CAAC,MAAM,CAAC,UAAU;AAC1C;uCAEe","debugId":null}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/sayfi/Desktop/proto-3d-model/frontend/pages/index.js"],"sourcesContent":["// pages/index.js\r\nimport { useEffect, useState } from \"react\";\r\nimport Head from \"next/head\";\r\nimport ModelViewer from \"../components/ModelViewer\";\r\n\r\nexport default function Home() {\r\n    const [data, setData] = useState({\r\n      pythonModelInfo: null,\r\n      nextModelInfo: null,\r\n      error: null,\r\n      loading: true,\r\n    });\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n          try {\r\n            const [pythonRes, nextRes] = await Promise.all([\r\n              fetch(\"http://localhost:8000/python-model-info\"),\r\n              fetch(\"/api/nextjs-model-info\"),\r\n            ]);\r\n    \r\n            if (!pythonRes.ok || !nextRes.ok) {\r\n              throw new Error(\"Failed to fetch data from one or more backends.\");\r\n            }\r\n    \r\n            const [pythonData, nextData] = await Promise.all([\r\n              pythonRes.json(),\r\n              nextRes.json(),\r\n            ]);\r\n    \r\n            setData({\r\n              pythonModelInfo: pythonData,\r\n              nextModelInfo: nextData,\r\n              error: null,\r\n              loading: false,\r\n            });\r\n          } catch (error) {\r\n            setData((prev) => ({ ...prev, error: error.message, loading: false }));\r\n          }\r\n        };\r\n    \r\n        fetchData();\r\n      }, []);\r\n      const { pythonModelInfo, nextModelInfo, error, loading } = data;\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <Head>\r\n        <title>3D Model Viewer</title>\r\n        <meta\r\n          name=\"description\"\r\n          content=\"3D Model Viewer with integrated backends\"\r\n        />\r\n        <link rel=\"icon\" href=\"/favicon.ico\" />\r\n      </Head>\r\n\r\n      <main>\r\n        <h2>3D Model Viewer</h2>\r\n        <div className=\"viewer-container\">\r\n            \r\n          <ModelViewer />\r\n        </div>\r\n\r\n        {loading ? (\r\n          <p>Loading data...</p>\r\n        ) : error ? (\r\n          <p className=\"error\">{error}</p>\r\n        ) : (\r\n          <div className=\"info-container\">\r\n            {pythonModelInfo && (\r\n              <div className=\"info-panel\">\r\n                <h3>Python Backend Info</h3>\r\n                <p><strong>Model Name:</strong> {pythonModelInfo.model_name}</p>\r\n                <p><strong>Vertex Count:</strong> {pythonModelInfo.vertex_count}</p>\r\n                <p><strong>Texture Details:</strong> {pythonModelInfo.texture_details}</p>\r\n              </div>\r\n            )}\r\n\r\n            {nextModelInfo && (\r\n              <div className=\"info-panel\">\r\n                <h3>Next.js Backend Info</h3>\r\n                <p><strong>Model Scale:</strong> {nextModelInfo.scale}</p>\r\n                <p><strong>Face Count:</strong> {nextModelInfo.face_count}</p>\r\n                <p><strong>Created By:</strong> {nextModelInfo.created_by}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      \r\n\r\n      <style jsx>{`\r\n.container {\r\n    min-height: 100vh;\r\n    padding: 0 0.5rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen,\r\n    Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\r\n}\r\n\r\nmain {\r\n    width: 100%;\r\n    max-width: 1200px;\r\n    padding: 2rem 0;\r\n    display: flex;\r\n    flex-direction: column; /* Stack elements vertically */\r\n    align-items: center;\r\n    gap: 20px;\r\n}\r\n\r\n.title {\r\n    margin: 0 0 2rem;\r\n    line-height: 1.15;\r\n    font-size: 2.5rem;\r\n    text-align: center;\r\n    color: #0070f3;\r\n}\r\n\r\n    .viewer-container {\r\n  width: 100%; /* Full width for better visibility */\r\n  height: 70vh; /* Takes majority of the screen */\r\n  border: 1px solid #eaeaea;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n}\r\n\r\n.info-container {\r\n  width: 80%; /* Less space for info */\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-around;\r\n  gap: 20px;\r\n}\r\n\r\n.info-panel {\r\n  flex: 1;\r\n  padding: 1.5rem;\r\n  border: 1px solid #eaeaea;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  background-color: #f9f9f9;\r\n}      \r\n.info-panel:hover {\r\n    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .info-container {\r\n        flex-direction: column; /* Stack info below 3D model on small screens */\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n.viewer-container,\r\n.info-container {\r\n      width: 100%;\r\n   }\r\n}\r\n\r\n.info-panel h2 {\r\n    margin-top: 0;\r\n    color: #333;\r\n    border-bottom: 1px solid #eaeaea;\r\n    padding-bottom: 0.5rem;\r\n}\r\n\r\n.model-info p {\r\n    margin: 0.7rem 0;\r\n}\r\n\r\n.error {\r\n    color: #e53e3e;\r\n    font-weight: 500;\r\n    padding: 0.5rem;\r\n    background-color: #fed7d7;\r\n    border-radius: 5px;\r\n}\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;;AACjB;AACA;AACA;;;;;;;;;;AAEe,SAAS;IACpB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;QAC/B,iBAAiB;QACjB,eAAe;QACf,OAAO;QACP,SAAS;IACX;IAEA,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,CAAC,WAAW,QAAQ,GAAG,MAAM,QAAQ,GAAG,CAAC;oBAC7C,MAAM;oBACN,MAAM;iBACP;gBAED,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE;oBAChC,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,CAAC,YAAY,SAAS,GAAG,MAAM,QAAQ,GAAG,CAAC;oBAC/C,UAAU,IAAI;oBACd,QAAQ,IAAI;iBACb;gBAED,QAAQ;oBACN,iBAAiB;oBACjB,eAAe;oBACf,OAAO;oBACP,SAAS;gBACX;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,CAAC,OAAS,CAAC;wBAAE,GAAG,IAAI;wBAAE,OAAO,MAAM,OAAO;wBAAE,SAAS;oBAAM,CAAC;YACtE;QACF;QAEA;IACF,GAAG,EAAE;IACL,MAAM,EAAE,eAAe,EAAE,aAAa,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IAE/D,qBACE,qKAAC;kDAAc;;0BACb,qKAAC,6HAAA,CAAA,UAAI;;kCACH,qKAAC;;kCAAM;;;;;;kCACP,qKAAC;wBACC,MAAK;wBACL,SAAQ;;;;;;;kCAEV,qKAAC;wBAAK,KAAI;wBAAO,MAAK;;;;;;;;;;;;;0BAGxB,qKAAC;;;kCACC,qKAAC;;kCAAG;;;;;;kCACJ,qKAAC;kEAAc;kCAEb,cAAA,qKAAC,kHAAA,CAAA,UAAW;;;;;;;;;;oBAGb,wBACC,qKAAC;;kCAAE;;;;;+BACD,sBACF,qKAAC;kEAAY;kCAAS;;;;;6CAEtB,qKAAC;kEAAc;;4BACZ,iCACC,qKAAC;0EAAc;;kDACb,qKAAC;;kDAAG;;;;;;kDACJ,qKAAC;;;0DAAE,qKAAC;;0DAAO;;;;;;4CAAoB;4CAAE,gBAAgB,UAAU;;;;;;;kDAC3D,qKAAC;;;0DAAE,qKAAC;;0DAAO;;;;;;4CAAsB;4CAAE,gBAAgB,YAAY;;;;;;;kDAC/D,qKAAC;;;0DAAE,qKAAC;;0DAAO;;;;;;4CAAyB;4CAAE,gBAAgB,eAAe;;;;;;;;;;;;;4BAIxE,+BACC,qKAAC;0EAAc;;kDACb,qKAAC;;kDAAG;;;;;;kDACJ,qKAAC;;;0DAAE,qKAAC;;0DAAO;;;;;;4CAAqB;4CAAE,cAAc,KAAK;;;;;;;kDACrD,qKAAC;;;0DAAE,qKAAC;;0DAAO;;;;;;4CAAoB;4CAAE,cAAc,UAAU;;;;;;;kDACzD,qKAAC;;;0DAAE,qKAAC;;0DAAO;;;;;;4CAAoB;4CAAE,cAAc,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGzE","debugId":null}}]
}